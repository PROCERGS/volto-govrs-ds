import { Canvas, Meta, Story, Controls, ArgTypes } from '@storybook/blocks';
import * as TextareaStories from './CustomTextarea.stories';

<Meta of={TextareaStories} />

# CustomTextarea

O componente `CustomTextarea` √© um campo de entrada de texto multilinha totalmente estilizado e acess√≠vel, seguindo as diretrizes do Design System do Governo do Rio Grande do Sul. Ele oferece suporte a valida√ß√£o, estados visuais, feedback contextual e m√∫ltiplas variantes de tamanho e layout.

## Caracter√≠sticas Principais

- ‚úÖ **Acessibilidade**: Implementa ARIA labels e descri√ß√µes adequadas
- üé® **Estados Visuais**: Suporte para success, error, warning e info
- üìè **Variantes de Tamanho**: Small, medium (padr√£o) e large
- üåì **Modo Escuro**: Otimizado para fundos escuros
- ‚å®Ô∏è **Valida√ß√£o**: Limite de caracteres com feedback visual
- üéØ **Flex√≠vel**: Layout vertical ou horizontal do r√≥tulo

## Uso B√°sico

O exemplo mais simples requer apenas as propriedades obrigat√≥rias: `id`, `title`, `value`, e `onChange`.

<Canvas of={TextareaStories.Default} />

## Propriedades

<ArgTypes of={TextareaStories} />

---

## Exemplos

### Com Valor Inicial

√ötil para edi√ß√£o de conte√∫do existente:

<Canvas of={TextareaStories.WithValue} />

### Com Descri√ß√£o

Adicione contexto e orienta√ß√µes ao usu√°rio:

<Canvas of={TextareaStories.WithDescription} />

### Limite de Caracteres

Valide o comprimento do texto automaticamente:

<Canvas of={TextareaStories.WithMaxLength} />

---

## Variantes de Tamanho

### Pequeno

Ideal para interfaces compactas e formul√°rios com m√∫ltiplos campos:

<Canvas of={TextareaStories.Small} />

### Grande

Perfeito para entrada de textos longos e detalhados:

<Canvas of={TextareaStories.Large} />

---

## Estados Visuais

O componente oferece quatro estados visuais com feedback autom√°tico.

### Sucesso

Indica valida√ß√£o bem-sucedida:

<Canvas of={TextareaStories.Success} />

### Erro

Alerta sobre problemas de valida√ß√£o:

<Canvas of={TextareaStories.Error} />

### Aviso

Para situa√ß√µes que requerem aten√ß√£o:

<Canvas of={TextareaStories.Warning} />

### Informativo

Fornece contexto adicional:

<Canvas of={TextareaStories.Info} />

---

## Variantes de Layout

### Layout Horizontal

R√≥tulo posicionado √† esquerda do campo:

<Canvas of={TextareaStories.Left} />

### Modo Escuro

Otimizado para fundos escuros:

<Canvas of={TextareaStories.DarkMode} />

---

## Estados Especiais

### Desabilitado

Campo n√£o edit√°vel:

<Canvas of={TextareaStories.Disabled} />

### Campo Obrigat√≥rio

Conven√ß√£o visual com asterisco:

<Canvas of={TextareaStories.Required} />

---

## Casos de Uso

### Texto Longo

Comportamento com m√∫ltiplas linhas:

<Canvas of={TextareaStories.LongText} />

### Valida√ß√£o de Limite

Feedback quando o limite √© excedido:

<Canvas of={TextareaStories.MaxLengthWithError} />

---

## Playground Interativo

Experimente todas as propriedades do componente:

<Canvas of={TextareaStories.Playground} />

<Controls of={TextareaStories.Playground} />

---

## Boas Pr√°ticas

### ‚úÖ Fa√ßa

- Use `description` para orientar o usu√°rio sobre o formato esperado
- Combine `maxLength` com mensagens claras sobre o limite
- Utilize estados visuais para feedback imediato ap√≥s valida√ß√£o
- Adicione `placeholder` com exemplos concretos do que deve ser digitado
- Use a variante `large` para campos que esperam textos longos
- Implemente o modo escuro quando o componente estiver em fundos escuros

### ‚ùå Evite

- N√£o use apenas o placeholder como substituto do label
- Evite descri√ß√µes longas demais - mantenha-as concisas e objetivas
- N√£o abuse de estados visuais - use apenas quando houver valida√ß√£o real
- Evite limites de caracteres muito restritivos sem justificativa clara
- N√£o use tamanhos pequenos para textos que naturalmente s√£o longos

---

## Acessibilidade

O componente implementa as seguintes pr√°ticas de acessibilidade:

- **`htmlFor` e `id`**: Associa√ß√£o correta entre label e textarea
- **`aria-describedby`**: Vincula descri√ß√µes ao campo para leitores de tela
- **`role="alert"`**: Mensagens de feedback s√£o anunciadas adequadamente
- **`disabled`**: Estado desabilitado √© comunicado corretamente
- **Feedback Visual**: √çcones complementam mensagens de texto

---

## Integra√ß√£o com Formul√°rios

```tsx
import CustomTextarea from '@plone/components/CustomTextarea';
import { useState } from 'react';

function MyForm() {
  const [comment, setComment] = useState('');
  const [error, setError] = useState(false);

  const handleSubmit = (e) => {
    e.preventDefault();
    if (comment.length < 10) {
      setError(true);
    } else {
      // Enviar formul√°rio
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      <CustomTextarea
        id="comment"
        title="Coment√°rio"
        value={comment}
        onChange={setComment}
        maxLength={500}
        State={error ? 'error' : undefined}
        description="Descreva sua experi√™ncia (m√≠nimo 10 caracteres)"
        placeholder="Digite seu coment√°rio..."
      />
      <button type="submit">Enviar</button>
    </form>
  );
}
```

---

## API Reference

### Props

| Prop | Tipo | Padr√£o | Descri√ß√£o |
|------|------|--------|-----------|
| `id` | `string` | - | **Obrigat√≥rio**. Identificador √∫nico do textarea |
| `title` | `string` | - | **Obrigat√≥rio**. Texto do r√≥tulo (label) |
| `value` | `string` | - | **Obrigat√≥rio**. Valor atual do textarea |
| `onChange` | `(value: string) => void` | - | **Obrigat√≥rio**. Callback quando o valor muda |
| `description` | `string` | `undefined` | Texto descritivo exibido abaixo do campo |
| `placeholder` | `string` | `undefined` | Texto de dica quando o campo est√° vazio |
| `maxLength` | `number` | `undefined` | N√∫mero m√°ximo de caracteres permitidos |
| `isDisabled` | `boolean` | `false` | Desabilita o campo quando true |
| `size` | `'small' \| 'large'` | `undefined` | Variante de tamanho do campo |
| `State` | `'success' \| 'error' \| 'warning' \| 'info'` | `undefined` | Estado visual com feedback |
| `darkMode` | `boolean` | `false` | Ativa estilo para fundos escuros |
| `left` | `boolean` | `false` | Posiciona r√≥tulo √† esquerda |

---

## Depend√™ncias CSS

O componente requer os estilos do Design System GovRS. Certifique-se de importar:

```css
@import '@govbr-ds/core/dist/core.css';
```

As classes CSS utilizadas:
- `.br-textarea`
- `.br-textarea.small`
- `.br-textarea.large`
- `.br-textarea.dark-mode`
- `.br-textarea.left`
- `.br-textarea.danger` (para erro)
- `.br-textarea.success`
- `.br-textarea.warning`
- `.br-textarea.info`

---

## Changelog

### Vers√£o Atual

- ‚ú® Implementa√ß√£o inicial do componente
- ‚úÖ Suporte a todos os estados visuais (success, error, warning, info)
- ‚úÖ Valida√ß√£o de limite de caracteres
- ‚úÖ Variantes de tamanho (small, large)
- ‚úÖ Modo escuro
- ‚úÖ Layout horizontal e vertical
- ‚úÖ Acessibilidade completa
- ‚úÖ √çcones de feedback integrados

---

## Suporte e Contribui√ß√£o

Para reportar bugs ou solicitar funcionalidades, entre em contato com a equipe de desenvolvimento do Design System GovRS.

---

## Licen√ßa

Este componente faz parte do Design System do Governo do Rio Grande do Sul e segue suas diretrizes de uso e licenciamento.
