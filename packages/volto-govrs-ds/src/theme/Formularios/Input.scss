@import '../variables.scss';

.upload-root {
  display: inline-block;
}

.upload-native {
  /* visually hide but keep accessible */
  position: absolute;
  overflow: hidden;
  width: 1px;
  height: 1px;
  padding: 0;
  border: 0;
  margin: -1px;
  clip: rect(0 0 0 0);
}

.upload-btn {
  display: inline-flex;
  width: 550px;
  height: 48px;
  align-items: center;
  padding: 8px 16px;
  border: 1px dashed #279b4a;
  border-radius: 6px;
  background-color: #ffffff;
  color: #279b4a;
  cursor: pointer;
  font-family: $font-family-base;
  font-size: 16px;
  font-weight: 400;
  gap: 12px;
}

.upload-btn:hover,
.upload-btn.hover-like {
  background-color: #ddf9e3;
}

.upload-icon svg {
  color: #279b4a; /* default color for icon via currentColor */
  transition:
    color 120ms ease-in-out,
    fill 120ms ease-in-out;
}

.upload-icon svg path {
  fill: currentColor;
  transition: fill 120ms ease-in-out;
}

.upload-btn:hover .upload-icon svg,
.upload-btn.hover-like .upload-icon svg {
  color: #1a7235;
}

.upload-label {
  display: inline-block;
}

/* loading */
.upload-loading {
  display: flex;
  align-items: center;
  margin-top: 8px;
  gap: 8px;
}

.upload-spinner {
  width: 16px;
  height: 16px;
  border: 2px solid rgba(0, 0, 0, 0.08);
  border-radius: 50%;
  border-top-color: #1a7235;
  animation: upload-spin 1s linear infinite;
}

@keyframes upload-spin {
  to {
    transform: rotate(360deg);
  }
}

.upload-loading-text {
  color: #222222;
  font-size: 14px;
}

/* feedback badges (copied/adapted from Select styles) */
.upload-feedback {
  display: inline-flex;
  align-items: center;
  padding: 6px 10px 6px 40px;
  border-radius: 4px;
  margin-top: 8px;
  background-position: 12px center;
  background-repeat: no-repeat;
  background-size: 16px 16px;
  font-size: 14px;
  gap: 8px;
}
.upload-feedback--invalid {
  background-color: #c62828;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><circle cx='10' cy='10' r='9' fill='%23FFFFFF'/><path d='M6.5 6.5 L13.5 13.5 M13.5 6.5 L6.5 13.5' stroke='%23c62828' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round' fill='none'/></svg>");
  color: #ffffff;
}

/* invalid root state: change colors/borders when field invalid */
.upload-root--invalid {
  .upload-btn {
    border-color: #e52207; /* dashed border color when invalid */
    color: #e52207; /* label color */
  }

  .upload-item__remove svg path {
    fill: #e52207; /* remove icon color when invalid */
  }

  .upload-feedback--invalid {
    background-color: #e52207;
    color: #ffffff;
  }
  /* make left upload icon follow invalid color */
  .upload-icon svg {
    color: #e52207;
  }
  /* keep left icon red even when the button is hovered */
  .upload-btn:hover .upload-icon svg,
  .upload-btn.hover-like .upload-icon svg {
    color: #e52207;
  }
}
.upload-feedback--valid {
  background-color: #1a7235;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><circle cx='10' cy='10' r='9' fill='%23FFFFFF'/><path d='M6.5 10.5 L9 13 L13.5 7.5' stroke='%231A7235' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round' fill='none'/></svg>");
  color: #ffffff;
}
.upload-feedback--disabled {
  background-color: #f2c037;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='17' viewBox='0 0 20 17' fill='none'><path d='M18.7812 14.7812C19.3438 15.7812 18.625 17 17.4688 17H2.5C1.34375 17 0.625 15.75 1.1875 14.7812L8.6875 1.75C9.25 0.75 10.7188 0.78125 11.2812 1.75L18.7812 14.7812ZM10 12.0625C9.1875 12.0625 8.5625 12.7188 8.5625 13.5C8.5625 14.3125 9.1875 14.9375 10 14.9375C10.7812 14.9375 11.4375 14.3125 11.4375 13.5C11.4375 12.7188 10.7812 12.0625 10 12.0625ZM8.625 6.90625L8.84375 11.1562C8.875 11.375 9.03125 11.5 9.21875 11.5H10.75C10.9375 11.5 11.0938 11.375 11.125 11.1562L11.3438 6.90625C11.375 6.6875 11.1875 6.5 10.9688 6.5H9C8.78125 6.5 8.59375 6.6875 8.625 6.90625Z' fill='%23333333'/></svg>");
  color: #222222;
}

/* sr-only live region styling fallback */
.upload-live {
  position: absolute;
  left: -9999px;
  overflow: hidden;
  width: 1px;
  height: 1px;
}

/* uploaded items list */
.upload-list {
  display: flex;
  flex-direction: column;
  margin-top: 12px;
  gap: 8px;
}

.upload-item {
  position: relative;
  display: flex;
  width: 550px;
  height: 56px;
  box-sizing: border-box;
  align-items: center;
  padding: 12px 16px;
  border: 1px solid #e6e6e6;
  border-radius: 2px;
  background-color: #ffffff;
  color: #000000;
  font-family: $font-family-base;
  font-size: 16px;
  font-weight: 400;
  gap: 8px;
}

.upload-item__content {
  overflow: hidden;
  flex: 1 1 auto;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.upload-item__icon {
  position: absolute;
  top: 50%;
  right: 12px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transform: translateY(-50%);
}

.upload-item__icon svg {
  width: 10px;
  height: 13px;
  fill: #1a7235; /* icon color */
}

.upload-root--disabled {
  opacity: 1;
  .upload-btn {
    border-color: #e0e0e0;
    background-color: #fafafa;
    color: rgba(39,155,74,0.45); /* #279B4A at 45% opacity for disabled state */
    cursor: not-allowed;
    pointer-events: none;
  }

  .upload-label {
    color: rgba(39,155,74,0.45);
  }

  /* make the left upload icon follow disabled color with opacity */
  .upload-icon svg {
    color: rgba(39,155,74,0.45);
  }

  .upload-feedback--disabled {
    display: inline-flex;
  }
}

/* remove button (trash) styling */
.upload-item__remove {
  position: absolute;
  top: 50%;
  right: 12px;
  display: inline-flex;
  width: 32px;
  height: 32px;
  align-items: center;
  justify-content: center;
  padding: 4px;
  border: none;
  border-radius: 50%;
  background-color: #ffffff; /* default background */
  cursor: pointer;
  transform: translateY(-50%);
  transition:
    background-color 120ms ease,
    box-shadow 120ms ease;
}

.upload-item__remove svg {
  display: block;
  width: 16px;
  height: 16px;
}

.upload-item__remove svg path {
  fill: #279b4a; /* default icon fill */
  transition: fill 120ms ease;
}

.upload-item__remove:hover,
.upload-item__remove:focus {
  background-color: #ddf9e3; /* hover bg */
  outline: none;
}

.upload-item__remove:hover svg path,
.upload-item__remove:focus svg path {
  fill: #1a7235; /* hover icon color */
}

.upload-item__remove:focus-visible {
  box-shadow: 0 0 0 3px rgba(39, 155, 74, 0.12);
}
